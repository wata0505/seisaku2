#pragma once

#include "Model.h"
#include "Stage.h"
#include "Sprite.h"
//ãíì_
class Base
{
public:
	Base(DirectX::XMFLOAT3 pos);
	~Base();
	static Base& Instance();
	//çXêVèàóù
	void Update(float elapsedTime);

	//ï`âÊèàóù
	void Render(ID3D11DeviceContext* dc, ModelShader* shader);

	bool PillarVS(const DirectX::XMFLOAT3& pos, const float radius, const float height, DirectX::XMFLOAT3& outPos);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            

	// ÉåÉCÉLÉÉÉXÉg
	void UpdateTransform();

	void HpDisplay(RenderContext& rc, SpriteShader* shader);

	void InputDamage(int damage);

	//à íuéÊìæ
	const DirectX::XMFLOAT3& GetPosition() const { return position; }

	//à íuê›íË
	void SetPosition(const DirectX::XMFLOAT3& position) { this->position = position; }

	//ÉXÉPÅ[ÉãéÊìæ
	const DirectX::XMFLOAT3& GetScale() const { return scale; }

	//ÉXÉPÅ[ÉãéÊìæ
	void SetScale(const DirectX::XMFLOAT3& scale) { this->scale = scale; }

	DirectX::XMFLOAT3 GetPos() { return position; }

	float GetRadius() { return radius; }

	float GetHeight() { return height; }

	int GetHP() { return hp; }

	float GetJitterStrength() { return jitterStrength; }
	float GetSkyboxColor() { return skyboxColor; }

private:
	std::unique_ptr<Model> obj = nullptr;
	std::unique_ptr<Sprite> uiSprite;
	DirectX::XMFLOAT4X4   transform = { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1 };
	DirectX::XMFLOAT3	  position = { 0,0,0 };
	DirectX::XMFLOAT3	  angle{ 0,0,0 };
	DirectX::XMFLOAT3	  scale = { 1,1,1 };
	bool renderflag = true;
	float radius = 1.5;
	float height = 10;
	int hp = 1000;
	int hpMax = 1000;
	float jitterStrength = 0;
	float skyboxColor = 0.0f;
};
